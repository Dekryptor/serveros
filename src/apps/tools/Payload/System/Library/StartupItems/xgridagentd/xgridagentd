#!/bin/sh

##
# Xgrid agent
##

. /etc/rc.common

StartService ()
{

    if [ -f /usr/libexec/xgrid/xgridagentd ]; then
        if pid=$(GetPID xgridagentd); then
            return 0
        else
	    if [ "${XGRIDAGENT:=-NO-}" = "-YES-" ]; then
		ConsoleMessage "Starting Xgrid Agent"
		/usr/libexec/xgrid/xgridagentd &
	    fi
	fi
    fi
}

StopService ()
{
    if pid=$(GetPID xgridagentd); then
	ConsoleMessage "Stopping Xgrid Agent"
	kill -TERM "${pid}"
    else
	ConsoleMessage "Xgrid Agent not responding."
    fi
}

RestartService () { StopService; StartService; }

RunService "$1"
