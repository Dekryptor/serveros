<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
    <HEAD>
        <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="TEXT/HTML; CHARSET=ISO-8859-1">
        <META NAME="PRAGMA" CONTENT="NO-CACHE">
        <TITLE>SAN</TITLE>
    </HEAD>
    <SCRIPT LANGUAGE="JavaScript">
    <!--
    function SelectCommand(popup) {
        selection = popup.options[popup.selectedIndex].value;
        commandValue = '<?xml version="1.0" encoding="UTF-8"?>\n';
        commandValue += '<plist version="0.9">\n';
        commandValue += '<dict>\n';
        if (selection == "getState") {
            commandValue += '    <key>command</key>\n';
            commandValue += '    <string>getState</string>\n';
            commandValue += '    <key>variant</key>\n';
            commandValue += '    <string>withDetails</string>\n';
        } else if (selection == "tailFile") {
            commandValue += '    <key>command</key>\n';
            commandValue += '    <string>tailFile</string>\n';
            commandValue += '    <key>path</key>\n';
            commandValue += '    <string>/var/log/system.log</string>\n';
            commandValue += '    <key>offset</key>\n';
            commandValue += '    <integer>0</integer>\n';
            commandValue += '    <key>amount</key>\n';
            commandValue += '    <integer>10000</integer>\n';
        } else if (selection == "setState") {
            commandValue += '    <key>command</key>\n';
            commandValue += '    <string>setState</string>\n';
            commandValue += '    <key>state</key>\n';
            commandValue += '    <string>START</string>\n';
		} else if (selection == "buildOrJoinSan") {
			commandValue +=	'	 <key>command</key>\n';
			commandValue +=	'	 <string>buildOrJoinSan</string>\n'
			commandValue += '	 <key>buildNew</key>\n';
			commandValue += '	 <false/>\n';
			commandValue += '	 <key>migrate</key>\n';
			commandValue += '	 <false/>\n';
            commandValue += '    <key>xsanAddr</key>\n';
            commandValue += '    <string>127.0.0.1</string>\n';
            commandValue += '    <key>name</key>\n';
            commandValue += '    <string>SuperSAN</string>\n';
            commandValue += '    <key>sanConfigLDAP</key>\n';
            commandValue += '    <string>hostname</string>\n';
            commandValue += '    <key>authMethod</key>\n';
            commandValue += '    <string>auth_secret</string>\n';
            commandValue += '    <key>sharedSecret</key>\n';
            commandValue += '    <string>ABCDEfGHIJKLMNOPQRSTUVWXYZABCDEfGHIJKLMNOPQRSTUVWXYZ0123456789AB</string>\n';
		} else if (selection == "getLUNs") {
			commandValue += '	<key>command</key>\n';
			commandValue += '	<string>getLUNs</string>\n';
		} else if (selection == "refreshLUNs") {
			commandValue +=	'	<key>command</key>\n';
			commandValue +=	'	<string>refreshLUNs</string>\n'
        } else if (selection == "readSettings") {
            commandValue += '    <key>command</key>\n';
            commandValue += '    <string>readSettings</string>\n';
        } else if (selection == "writeSettings") {
            commandValue += '    <key>command</key>\n';
            commandValue += '    <string>writeSettings</string>\n';
            commandValue += '    <key>configuration</key>\n';
            commandValue += '    <dict>\n';
            commandValue += '        <key>anyKey</key>\n';
            commandValue += '        <string>anyValue</string>\n';
            commandValue += '    </dict>\n';
        }else {
            document.forms['commandForm'].elements['input'].value = '';
            return;
        }
        commandValue += '</dict>\n';
        commandValue += '</plist>\n';
        document.forms['commandForm'].elements['input'].value = commandValue;
    }
    //-->
    </SCRIPT>
    <BODY>
        <TABLE WIDTH="100%" BORDER="0" CELLSPACING="5">
            <TR>
                <TD ALIGN="CENTER" HEIGHT="40" VALIGN="TOP">
                    <H3>This http form can be used to test 'servermgr_san'</H3>
                </TD>
            </TR>
            <TR>
                <TD ALIGN="CENTER">
                    Command: <SELECT NAME="commandPopup" ONCHANGE="SelectCommand(this)">
                        <OPTION SELECTED VALUE="N/A">- Select a command -
                        <OPTION VALUE="getState">getState
                        <OPTION VALUE="tailFile">tailFile
                        <OPTION VALUE="setState">setState
                        <OPTION VALUE="buildOrJoinSan">Build or join a SAN
                        <OPTION VALUE="readSettings">readSettings
                        <OPTION VALUE="writeSettings">writeSettings
                        <OPTION VALUE="getLUNs">Get LUN Information
                        <OPTION VALUE="refreshLUNs">Refresh LUN Information
                    </SELECT>
                </TD>
            </TR>
        </TABLE>
        <TABLE WIDTH="100%" BORDER="0" CELLSPACING="5">
            <FORM METHOD="GET" NAME="commandForm" ACTION="/commands/servermgr_san">
                <TR>
                    <TD ALIGN="CENTER">
                        <TEXTAREA COLS="80" ROWS="24" MAXLENGTH="32767" NAME="input"></TEXTAREA>
                    </TD>
                </TR>
                <TR>
                    <TD ALIGN="CENTER">
                        <INPUT TYPE="SUBMIT" VALUE="Send Command" NAME="send"></INPUT>
                    </TD>
                </TR>
                <TR>
                    <TD ALIGN="CENTER" HEIGHT="40" VALIGN="BOTTOM">
                        <SMALL>
                            Click on your browser back button after the result is displayed
                        </SMALL>
                    </TD>
                </TR>
                <NOSCRIPT>
                <TR>
                    <TD ALIGN="CENTER" HEIGHT="40" VALIGN="BOTTOM">
                            <B>You need a JavaScript-enabled web browser!</B>
                    </TD>
                </TR>
                </NOSCRIPT>
            </FORM>
        </TABLE>
    </BODY>
</HTML>