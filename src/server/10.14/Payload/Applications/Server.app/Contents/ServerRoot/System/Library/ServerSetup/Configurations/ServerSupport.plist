<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>description</key>
	<string>ServerSupport</string>
	<key>dependencies</key>
	<array>
		<string>Migration</string>
	</array>
	<key>setup</key>
	<dict>
		<key>scripts</key>
		<array>
			<string>${serverRoot}/usr/libexec/falseShell_Install.pl</string>
			<string>${serverRoot}/usr/libexec/copyUninstallExtras.sh</string>
		</array>
		<key>directories</key>
		<dict>
			<key>paths.d</key>
			<dict>
				<key>path</key>
				<string>/private/etc/paths.d</string>
				<key>owner</key>
				<string>root</string>
				<key>group</key>
				<string>wheel</string>
				<key>mode</key>
				<string>0755</string>
			</dict>
		</dict>
		<key>files</key>
		<dict>
			<key>serverTuning</key>
			<dict>
				<key>overwrite</key>
				<true/>
				<key>source</key>
				<string>${serverRoot}/private/etc/rc.server</string>
				<key>path</key>
				<string>/private/etc/rc.server</string>
			</dict>
			<key>Install Server Paths</key>
			<dict>
				<key>path</key>
				<string>/private/etc/paths.d/com.apple.server</string>
				<key>content</key>
				<string>/Applications/Server.app/Contents/ServerRoot/usr/bin
/Applications/Server.app/Contents/ServerRoot/usr/sbin
</string>
			</dict>
		</dict>
	</dict>
	<key>migration</key>
	<dict>
		<key>scripts</key>
		<array>
			<string>${serverRoot}/usr/libexec/restoreServerBackup.sh</string>
			<string>${serverRoot}/usr/libexec/eventMonitor.sh</string>
            <dict>
                <key>description</key>
                <string>Migrate the sharepoint records</string>
                <key>path</key>
                <string>${serverRoot}/usr/sbin/serveradmin</string>
                <key>arguments</key>
                <array>
                    <string>command</string>
                    <string>sharing:command</string>
                    <string>=</string>
                    <string>migrateSharepoints</string>
                </array>
            </dict>
		</array>
		<key>files</key>
		<dict>
			<key>EmondCookieFile</key>
			<dict>
				<key>path</key>
				<string>/private/var/db/emondClients/com.apple.server</string>
				<key>content</key>
				<string> </string>
			</dict>
		</dict>
	</dict>
	<key>promotion</key>
	<dict>
		<key>scripts</key>
		<array>
			<string>${serverRoot}/usr/libexec/restoreServerBackup.sh</string>
			<string>${serverRoot}/usr/libexec/eventMonitor.sh</string>
            <dict>
                <key>description</key>
                <string>Migrate the sharepoint records</string>
                <key>path</key>
                <string>${serverRoot}/usr/sbin/serveradmin</string>
                <key>arguments</key>
                <array>
                    <string>command</string>
                    <string>sharing:command</string>
                    <string>=</string>
                    <string>migrateSharepoints</string>
                </array>
            </dict>
		</array>
		<key>files</key>
		<dict>
			<key>EmondCookieFile</key>
			<dict>
				<key>path</key>
				<string>/private/var/db/emondClients/com.apple.server</string>
				<key>content</key>
				<string> </string>
			</dict>
		</dict>
	</dict>
	<key>restore</key>
	<dict>
		<key>scripts</key>
		<array>
			<dict>
				<key>arguments</key>
				<array>
					<string>--sourceRoot</string>
					<string>/Library/Server/Previous</string>
					<string>--targetRoot</string>
					<string>/</string>
					<string>--purge</string>
					<string>0</string>
					<string>--language</string>
					<string>en</string>
					<string>--sourceType</string>
					<string>System</string>
					<string>--sourceVersion</string>
					<string>${previousSystemVersion}</string>
				</array>
				<key>path</key>
				<string>${serverRoot}/usr/libexec/openDirectoryRE.py</string>
			</dict>
			<dict>
				<key>arguments</key>
				<array>
					<string>--sourceRoot</string>
					<string>/Library/Server/Previous</string>
					<string>--targetRoot</string>
					<string>/</string>
					<string>--purge</string>
					<string>0</string>
					<string>--language</string>
					<string>en</string>
					<string>--sourceType</string>
					<string>System</string>
					<string>--sourceVersion</string>
					<string>${previousSystemVersion}</string>
				</array>
				<key>path</key>
				<string>${serverRoot}/usr/libexec/serverSettingsRE.py</string>
			</dict>
			<dict>
				<key>arguments</key>
				<array>
					<string>--sourceRoot</string>
					<string>/Library/Server/Previous</string>
					<string>--targetRoot</string>
					<string>/</string>
					<string>--purge</string>
					<string>0</string>
					<string>--language</string>
					<string>en</string>
					<string>--sourceType</string>
					<string>System</string>
					<string>--sourceVersion</string>
					<string>${previousSystemVersion}</string>
				</array>
				<key>path</key>
				<string>${serverRoot}/usr/libexec/sharePointsRE.py</string>
			</dict>
		</array>
		<key>files</key>
		<dict>
			<key>EmondCookieFile</key>
			<dict>
				<key>path</key>
				<string>/private/var/db/emondClients/com.apple.server</string>
				<key>content</key>
				<string> </string>
			</dict>
		</dict>
	</dict>
	<key>postSetup</key>
	<dict>
		<key>scripts</key>
		<array>
			<dict>
				<key>description</key>
				<string>Run rcServerTunings.sh to tune system performance.</string>
				<key>path</key>
				<string>/bin/sh</string>
				<key>arguments</key>
				<array>
					<string>${serverRoot}/usr/libexec/rcServerTunings.sh</string>
				</array>
			</dict>
			<dict>
				<key>description</key>
				<string>Reset OpenLDAP restore state.</string>
				<key>path</key>
				<string>/bin/rm</string>
				<key>arguments</key>
				<array>
					<string>-f</string>
					<string>/var/db/openldap/migration/.ODRestoreCompleted</string>
				</array>
			</dict>
		</array>
	</dict>
</dict>
</plist>
